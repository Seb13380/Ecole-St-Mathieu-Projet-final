{% extends "layouts/base.twig" %}

{% block title %}Acheter des tickets de cantine
{% endblock %}

{% block main %}
	<!-- 
	=
	SECTION TICKETS DE CANTINE - EN DÃ‰VELOPPEMENT
	=
	
	<div class="min-h-screen bg-blue-50 py-8">
		<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">

			<div class="mb-8">
				<h1 class="text-3xl font-bold text-blue-900 mb-4">ðŸŽ« Tickets de cantine</h1>
				<p class="text-blue-700">Achetez des carnets de tickets pour vos enfants</p>
			</div>

			{% if success %}
				<div class="mb-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded">
					<strong>SuccÃ¨s :</strong>
					{{ success }}
				</div>
			{% endif %}

			{% if error %}
				<div class="mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
					<strong>Erreur :</strong>
					{{ error }}
				</div>
			{% endif %}

			<div class="bg-white rounded-lg shadow-lg p-6 mb-8">
				<h2 class="text-xl font-semibold text-gray-900 mb-4">ðŸ’° Tarifs</h2>
				<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
					<div class="bg-blue-50 p-4 rounded-lg">
						<div class="text-lg font-semibold text-blue-900">Prix par ticket</div>
						<div class="text-2xl font-bold text-blue-600">{{ ticketPrice }}â‚¬</div>
					</div>
					<div class="bg-green-50 p-4 rounded-lg">
						<div class="text-lg font-semibold text-green-900">Carnet de 10 tickets</div>
						<div class="text-2xl font-bold text-green-600">{{ bookletPrice }}â‚¬</div>
						<div class="text-sm text-green-700">Ã‰conomie recommandÃ©e</div>
					</div>
				</div>
			</div>

			<div class="space-y-6">
				{% for child in children %}
					<div class="bg-white rounded-lg shadow-lg p-6">
						<div class="flex justify-between items-start mb-4">
							<div>
								<h3 class="text-xl font-semibold text-gray-900">
									{{ child.firstName }}
									{{ child.lastName }}
								</h3>
								<p class="text-gray-600">Classe :
									{{ child.classe.nom }}</p>
							</div>
							<div class="text-right">
								<div class="text-lg font-semibold text-gray-900">
									Tickets restants
								</div>
								<div class="text-3xl font-bold {% if child.totalTicketsRemaining > 5 %}text-green-600{% elseif child.totalTicketsRemaining > 2 %}text-orange-600{% else %}text-red-600{% endif %}">
									{{ child.totalTicketsRemaining }}
								</div>
							</div>
						</div>

						{% if child.totalTicketsRemaining <= 2 %}
							<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded mb-4">
								âš ï¸ Attention : Il reste trÃ¨s peu de tickets !
							</div>
						{% elseif child.totalTicketsRemaining <= 5 %}
							<div class="bg-orange-100 border border-orange-400 text-orange-700 px-4 py-2 rounded mb-4">
								âš¡ Pensez Ã  recharger bientÃ´t
							</div>
						{% endif %}

						<form action="/parent/tickets/purchase" method="POST" class="mt-4">
							<input type="hidden" name="studentId" value="{{ child.id }}">

							<div class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
								<div>
									<label class="block text-sm font-medium text-gray-700 mb-2">
										Nombre de tickets
									</label>
									<select name="quantity" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
										<option value="10">10 tickets (73â‚¬)</option>
										<option value="20">20 tickets (146â‚¬)</option>
										<option value="30">30 tickets (219â‚¬)</option>
										<option value="50">50 tickets (365â‚¬)</option>
									</select>
								</div>

								<div>
									<button type="submit" class="w-full bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
										ðŸ›’ Acheter
									</button>
								</div>

								<div>
									<a href="/parent/tickets/calendar/{{ child.id }}" class="block text-center w-full bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors">
										ðŸ—“ï¸ Calendrier
									</a>
								</div>

								<div>
									<a href="/parent/tickets/child/{{ child.id }}" class="block text-center w-full bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300 transition-colors">
										ðŸ“Š Voir dÃ©tails
									</a>
								</div>
							</div>
						</form>
					</div>
				{% else %}
					<div class="bg-white rounded-lg shadow-lg p-8 text-center">
						<div class="text-6xl mb-4">ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦</div>
						<h3 class="text-xl font-semibold text-gray-900 mb-2">Aucun enfant inscrit</h3>
						<p class="text-gray-600">Vous devez d'abord inscrire vos enfants pour acheter des tickets de cantine.</p>
					</div>
				{% endfor %}
			</div>

			<div class="mt-8 bg-yellow-50 border border-yellow-200 rounded-lg p-6">
				<h3 class="text-lg font-semibold text-yellow-800 mb-2">â„¹ï¸ Informations importantes</h3>
				<ul class="text-yellow-700 space-y-1">
					<li>â€¢ Les tickets sont valables toute l'annÃ©e scolaire</li>
					<li>â€¢ Pensez Ã  rÃ©server les repas Ã  l'avance via le calendrier</li>
					<li>â€¢ Les tickets non utilisÃ©s peuvent Ãªtre remboursÃ©s en fin d'annÃ©e</li>
					<li>â€¢ En cas de problÃ¨me, contactez l'administration</li>
				</ul>
			</div>
		</div>
	</div>
	
	=
	FIN DE LA SECTION COMMENTÃ‰E
	=
	-->

	<!-- ðŸš§ PAGE EN COURS DE DÃ‰VELOPPEMENT ðŸš§ -->
	<div class="min-h-screen bg-gradient-to-br from-orange-100 via-yellow-50 to-orange-200 flex items-center justify-center py-8">
		<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
			
			<!-- Animation de construction -->
			<div class="mb-8">
				<div class="text-8xl mb-4 animate-bounce">ðŸš§</div>
				<div class="flex justify-center items-center space-x-4 mb-6">
					<div class="text-6xl animate-pulse">âš’ï¸</div>
					<div class="text-6xl animate-bounce delay-100">ðŸ”¨</div>
					<div class="text-6xl animate-pulse delay-200">âš™ï¸</div>
				</div>
			</div>

			<!-- Titre principal -->
			<div class="bg-white rounded-xl shadow-2xl p-8 mb-8 border-4 border-dashed border-orange-300">
				<h1 class="text-4xl md:text-5xl font-bold text-orange-600 mb-4">
					ðŸŽ« Tickets de Cantine
				</h1>
				<h2 class="text-2xl md:text-3xl font-semibold text-orange-500 mb-6">
					En cours de dÃ©veloppement
				</h2>
				
				<!-- Barre de progression animÃ©e -->
				<div class="w-full bg-orange-200 rounded-full h-4 mb-6">
					<div class="bg-gradient-to-r from-orange-400 to-yellow-400 h-4 rounded-full animate-pulse" style="width: 75%"></div>
				</div>
				<p class="text-orange-400 font-medium">DÃ©veloppement Ã  75%</p>
			</div>

			<!-- FonctionnalitÃ©s Ã  venir -->
			<div class="bg-white rounded-xl shadow-xl p-6 mb-8">
				<h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center justify-center">
					<span class="text-3xl mr-3">âœ¨</span>
					FonctionnalitÃ©s Ã  venir
				</h3>
				
				<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
					<div class="bg-orange-50 rounded-lg p-4 border-l-4 border-orange-400">
						<div class="flex items-center mb-2">
							<span class="text-2xl mr-3">ðŸ›’</span>
							<h4 class="font-semibold text-gray-800">Achat de tickets</h4>
						</div>
						<p class="text-gray-600 text-sm">SystÃ¨me de paiement sÃ©curisÃ© pour l'achat de carnets de tickets</p>
					</div>
					
					<div class="bg-green-50 rounded-lg p-4 border-l-4 border-green-400">
						<div class="flex items-center mb-2">
							<span class="text-2xl mr-3">ðŸ—“ï¸</span>
							<h4 class="font-semibold text-gray-800">RÃ©servation repas</h4>
						</div>
						<p class="text-gray-600 text-sm">Calendrier interactif pour rÃ©server les repas de vos enfants</p>
					</div>
					
					<div class="bg-blue-50 rounded-lg p-4 border-l-4 border-blue-400">
						<div class="flex items-center mb-2">
							<span class="text-2xl mr-3">ðŸ“Š</span>
							<h4 class="font-semibold text-gray-800">Suivi des consommations</h4>
						</div>
						<p class="text-gray-600 text-sm">Historique dÃ©taillÃ© des repas pris par enfant</p>
					</div>
					
					<div class="bg-purple-50 rounded-lg p-4 border-l-4 border-purple-400">
						<div class="flex items-center mb-2">
							<span class="text-2xl mr-3">ðŸ’°</span>
							<h4 class="font-semibold text-gray-800">Gestion du solde</h4>
						</div>
						<p class="text-gray-600 text-sm">Visualisation en temps rÃ©el du solde de tickets restants</p>
					</div>
				</div>
			</div>

			<!-- Informations dÃ©veloppeur -->
			<div class="bg-gray-100 rounded-lg p-6 border border-gray-300">
				<h4 class="text-lg font-semibold text-gray-700 mb-3 flex items-center justify-center">
					<span class="text-2xl mr-2">ðŸ‘¨â€ðŸ’»</span>
					Informations techniques
				</h4>
				<div class="text-sm text-gray-600 space-y-2">
					<p>â€¢ <strong>Ã‰tat :</strong> Interface en cours de finalisation</p>
					<p>â€¢ <strong>Backend :</strong> API de paiement en dÃ©veloppement</p>
					<p>â€¢ <strong>Base de donnÃ©es :</strong> Tables tickets et rÃ©servations en place</p>
					<p>â€¢ <strong>SÃ©curitÃ© :</strong> Authentification parent implÃ©mentÃ©e</p>
				</div>
			</div>

			<!-- Bouton retour -->
			<div class="mt-8">
				<a href="/parent/dashboard" class="inline-flex items-center px-8 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors shadow-lg">
					<span class="text-xl mr-2">â¬…ï¸</span>
					Retour au tableau de bord
				</a>
			</div>
		</div>
	</div>
{% endblock %}

