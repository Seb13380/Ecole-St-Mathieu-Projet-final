{% extends "layouts/base.twig" %}

{% block title %}√âcole Saint-Mathieu - Accueil
{% endblock %}

{% block styles %}
	<style>
		/* Hero carousel sizing & transitions */
		#hero-carousel {
			height: 60rem;
		}

		@media(max-width: 1023px) {
			#hero-carousel {
				height: 35rem;
			}
		}

		/* Secondary carousel sizing */
		#secondary-carousel {
			height: 50rem;
		}

		@media(max-width: 1023px) {
			#secondary-carousel {
				height: 30rem;
			}
		}

		/* Custom carousel styles - Slideshow avec fade */
		.carousel-slide {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			opacity: 0;
			transition: opacity 0.8s ease-in-out;
			pointer-events: none;
		}

		.carousel-slide.active {
			opacity: 1;
			pointer-events: auto;
		}

		.carousel-slide img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}

		/* Full-width sections */
		.full-width-section {
			width: 98vw !important;
			position: relative;
			left: 50%;
			right: 50%;
			margin-left: -49vw !important;
			margin-right: -49vw !important;
			background-color: #a7e3dd;
			padding: 20px 0;
			box-sizing: border-box;
			max-width: 100%;
			overflow-x: hidden;
		}

		/* Colonnes 50/50 sur desktop, 100% sur mobile */
		@media(min-width: 1024px) {
			.lg\:w-1\/2 {
				width: 50% !important;
			}
		}

		/* Sur mobile, sections empil√©es verticalement */
		@media(max-width: 1023px) {
			.w-full.lg\:w-1\/2 {
				width: 100% !important;
				margin-bottom: 1rem;
			}
		}

		/* Force le flex-row sur desktop */
		@media(min-width: 1024px) {
			.lg\:flex-row {
				flex-direction: row !important;
				flex-wrap: nowrap !important;
			}
		}

		/* Carousel secondaire responsive */
		@media(max-width: 1023px) {
			#secondary-carousel {
				height: 400px !important;
			}
		}

		/* Google Maps styling */
		.maps-container iframe {
			border-radius: 12px;
			transition: transform 0.3s ease;
			height: 600px !important;
			min-height: 600px !important;
		}

		.maps-container:hover iframe {
			transform: scale(1.02);
		}

		/* Animation pour les ic√¥nes des informations pratiques */
		.info-card {
			transition: all 0.3s ease;
		}

		.info-card:hover {
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(167, 227, 221, 0.3);
		}
	</style>
{% endblock %}

{% block main %}

	{# <!-- Bandeau de d√©filement -->
						<div style="background: linear-gradient(45deg, #0d9488, #14b8a6, #5eead4); color: white; padding: 20px 0; font-weight: bold; font-size: 24px; text-align: center; position: relative; overflow: hidden; text-shadow: 2px 2px 4px rgba(0,0,0,0.7); border-bottom: 3px solid #0f766e;">
							<div style="animation: marquee 20s linear infinite;">
								‚ú® Site web √âcole Saint-Mathieu - D√©ploiement en cours - Nouvelles fonctionnalit√©s progressivement disponibles ! ‚ú®
							</div>
						</div>
					
						<style>
							@keyframes marquee {
								0% {
									transform: translateX(100%);
								}
								100% {
									transform: translateX(-100%);
								}
							}
						</style> #}

	<div class="py-8 px-4 md:py-16 md:px-8 bg-gradient-to-b from-[#a7e3dd] to-[#8dd3cc]">
		<div class="max-w-17xl mx-auto text-center">
			<h1 class="text-5xl md:text-7xl lg:text-8xl font-bold text-[#304a4d] mb-8 leading-tight" style="font-size: 3rem !important;">
				Bienvenue √† l'√âcole Saint-Mathieu
			</h1>
			<p class="text-2xl md:text-3xl lg:text-4xl text-[#304a4d] opacity-90 leading-relaxed max-w-7xl mx-auto px-2 md:px-4" style="font-size: 1.4rem !important; line-height: 1.5; margin: 1rem auto;">
				L'√©cole Saint Mathieu est ouverte √† tous, conform√©ment √† la volont√© de l'Eglise catholique de mettre √† la disposition de tous ses orientations √©ducatives. Elle est associ√©e √† l'Etat par contrat dans le cadre de la loi Debr√© de 1959.
				<br><br>
				Son Projet Educatif puise sa source dans l'Evangile. Ses propositions √©ducatives se fondent sur la vision chr√©tienne de la personne humaine, partag√©e par tous les √©tablissements catholiques.
			</p>
		</div>
	</div>
	<!-- Hero Carousel - Custom Slideshow -->
	<div class="relative w-full overflow-hidden" id="hero-carousel">
		{% if heroCarouselImages and heroCarouselImages|length > 0 %}
			{% for image in heroCarouselImages %}
				<div class="carousel-slide {% if loop.first %}active{% endif %}" data-slide-index="{{ loop.index - 1 }}">
					<img src="/uploads/hero-carousel/{{ image.filename }}" class="w-full h-full object-cover" alt="{{ image.titre ?: '√âcole Saint-Mathieu' }}"/>
					{% if image.titre or image.description %}
						<div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-8">
							{% if image.titre %}
								<h3 class="text-white text-4xl font-bold mb-2 drop-shadow-lg">{{ image.titre }}</h3>
							{% endif %}
							{% if image.description %}
								<p class="text-white text-2xl drop-shadow-lg">{{ image.description }}</p>
							{% endif %}
						</div>
					{% endif %}
				</div>
			{% endfor %}
		{% else %}
			<div class="carousel-slide active" data-slide-index="0">
				<img src="/assets/images/20250326_114849.jpg" class="w-full h-full object-cover" alt="√âcole Saint-Mathieu"/>
			</div>
			<div class="carousel-slide" data-slide-index="1">
				<img src="/assets/images/20250326_114954.jpg" class="w-full h-full object-cover" alt="Activit√©s scolaires"/>
			</div>
			<div class="carousel-slide" data-slide-index="2">
				<img src="/assets/images/47d2b2f0-69d4-4913-b80c-5da660a12e2e.jpg" class="w-full h-full object-cover" alt="Cour de r√©cr√©ation"/>
			</div>
		{% endif %}

		<!-- Navigation buttons -->
		<div class="absolute flex justify-between transform -translate-y-1/2 left-5 right-5 top-1/2 z-20">
			<button class="btn btn-circle bg-white/30 border-none hover:bg-white/50 carousel-prev">‚ùÆ</button>
			<button class="btn btn-circle bg-white/30 border-none hover:bg-white/50 carousel-next">‚ùØ</button>
		</div>
	</div>

	<div class="full-width-section py-8">
		<h2 class="text-3xl md:text-4xl font-bold text-[#304a4d] mb-12 text-center py-8">Actualit√©s et informations familles</h2>

		<!-- Section Actualit√©s - Accessible √† tous selon leur statut de connexion -->
		{% if actualites and actualites|length > 0 %}
			<!-- Section Actualit√©s avec contenu -->
			<div class="w-full flex flex-col min-h-[600px] gap-4">
				<div class="bg-gradient-to-br from-teal-50 to-cyan-100 p-0 flex-1 border-b-2 border-gray-300 rounded-lg overflow-hidden">
					<h3 class="text-3xl md:text-4xl font-bold bg-gradient-to-r from-teal-600 to-cyan-600 bg-clip-text text-transparent mb-6 text-center p-6">üì∞ Actualit√©s</h3>
					<div class="space-y-6 mb-8 px-8 pb-8">
						{% for actualite in actualites|slice(0, 3) %}
							<article style="background: linear-gradient(135deg, #f0fdfa 0%, #ccfbf1 25%, #99f6e4 50%, #5eead4 100%); backdrop-filter: blur(8px); box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); border-radius: 16px; overflow: hidden; transition: all 0.3s ease; border: 2px solid #5eead4;" onmouseover="this.style.transform='scale(1.02)'; this.style.boxShadow='0 20px 40px rgba(0, 0, 0, 0.15)'; this.style.background='linear-gradient(135deg, #ecfdf5 0%, #a7f3d0 25%, #6ee7b7 50%, #34d399 100%)'" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 10px 25px rgba(0, 0, 0, 0.1)'; this.style.background='linear-gradient(135deg, #f0fdfa 0%, #ccfbf1 25%, #99f6e4 50%, #5eead4 100%)'">
								{% if actualite.important %}
									<div
										style="background: linear-gradient(135deg, #0d9488 0%, #0f766e 50%, #134e4a 100%); padding: 16px; position: relative; overflow: hidden;">
										<!-- Effet de brillance anim√© -->
										<div style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); animation: shine 2s infinite;"></div>
										<div class="flex items-center justify-center" style="position: relative; z-index: 1;">
											<div style="background: rgba(255,255,255,0.2); border-radius: 50%; padding: 6px; margin-right: 12px; backdrop-filter: blur(4px);">
												<svg style="width: 20px; height: 20px; color: #ffffff;" fill="none" stroke="currentColor" viewbox="0 0 24 24">
													<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
												</svg>
											</div>
											<span style="color: #ffffff; text-shadow: 1px 1px 2px rgba(0,0,0,0.3); font-size: 16px; font-weight: bold; letter-spacing: 1px; text-transform: uppercase;">
												üíé Information Importante
											</span>
										</div>
									</div>
									<style>
										@keyframes shine {
											0% {
												left: -100%;
											}
											100% {
												left: 100%;
											}
										}
									</style>
								{% endif %}

								<div style="padding: 24px;">
									<div
										class="flex items-start gap-4">
										<!-- Contenu principal -->
										<div class="flex-1 min-w-0">
											<h4 style="font-size: 24px; font-weight: bold; color: #111827; margin-bottom: 12px; transition: color 0.3s ease; text-align: center;">
												{{ actualite.titre }}
											</h4>
											<div style="color: #374151; margin-bottom: 16px; line-height: 1.6; white-space: pre-line; font-size: 18px;">
												{% if actualite.contenu|length > 300 %}
													{{ actualite.contenu|slice(0, 300)|trim }}...
													<button style="background-color: #0d9488; color: white; font-weight: 600; margin-left: 8px; padding: 8px 16px; border-radius: 8px; transition: background-color 0.3s ease; font-size: 16px; border: none; cursor: pointer;" onclick="toggleFullText(this)" onmouseover="this.style.backgroundColor='#0f766e'" onmouseout="this.style.backgroundColor='#0d9488'">
														Lire la suite
													</button>
													<div class="hidden-content" style="display: none;">
														{{ actualite.contenu|slice(300) }}
													</div>
												{% else %}
													{{ actualite.contenu }}
												{% endif %}
											</div>

											<!-- M√©tadonn√©es en bas -->
											<!-- Support pour les PDF -->
											{% if actualite.mediaUrl and actualite.mediaType == 'pdf' %}
												<div class="mt-4 p-4 bg-red-50 border border-red-200 rounded-lg">
													<div class="flex items-center">
														<svg class="w-8 h-8 text-red-600 mr-3" fill="currentColor" viewbox="0 0 20 20">
															<path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z" clip-rule="evenodd"/>
														</svg>
														<div class="flex-1">
															<p class="text-sm font-medium text-red-800">Document PDF</p>
															<p class="text-xs text-red-600">Cliquez pour t√©l√©charger le document</p>
														</div>
														<a href="{{ actualite.mediaUrl }}" target="_blank" class="ml-4 px-3 py-1 bg-red-600 text-white text-sm font-medium rounded hover:bg-red-700 transition-colors">
															T√©l√©charger
														</a>
													</div>
												</div>
											{% endif %}

											<div class="flex flex-wrap items-center gap-3 text-sm text-gray-500 mt-4 pt-3 border-t border-gray-200">
												<div class="flex items-center">
													<div class="w-6 h-6 bg-gradient-to-r from-teal-400 to-cyan-400 rounded-full flex items-center justify-center mr-2">
														<svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24">
															<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
														</svg>
													</div>
													<span>{{ actualite.auteur.firstName }}
														{{ actualite.auteur.lastName }}</span>
												</div>
												<div class="flex items-center">
													<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewbox="0 0 24 24">
														<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
													</svg>
													<span>{{ actualite.datePublication|date('d/m/Y') }}</span>
												</div>
											</div>
										</div>

										<!-- Image optionnelle -->
										{% if actualite.mediaUrl and actualite.mediaType == 'image' %}
											<div style="flex-shrink: 0; width: 256px; height: 192px;">
												<img src="{{ actualite.mediaUrl }}" alt="{{ actualite.titre }}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); transition: box-shadow 0.3s ease;">
											</div>
										{% endif %}
									</div>
								</div>
							</article>
						{% endfor %}

						<!-- Lien vers toutes les actualit√©s -->
						<div class="text-center mt-8 pt-6" style="border-top: 1px solid rgba(255, 255, 255, 0.3);">
							<a href="/actualites" style="display: inline-flex; align-items: center; padding: 16px 32px; background: linear-gradient(to right, #0d9488, #0891b2); color: white; font-weight: bold; border-radius: 12px; box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1); font-size: 18px; border: 2px solid #0d9488; text-decoration: none; transition: all 0.3s ease;" onmouseover="this.style.background='linear-gradient(to right, #0f766e, #0e7490)'; this.style.transform='scale(1.05)'; this.style.boxShadow='0 20px 25px rgba(0, 0, 0, 0.15)'" onmouseout="this.style.background='linear-gradient(to right, #0d9488, #0891b2)'; this.style.transform='scale(1)'; this.style.boxShadow='0 10px 15px rgba(0, 0, 0, 0.1)'">
								<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewbox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path>
								</svg>
								Voir toutes les actualit√©s
								<svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewbox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
								</svg>
							</a>
						</div>

						<!-- Message d'invitation pour utilisateurs non connect√©s -->
						{% if not user %}
							<div class="text-center mt-6 pt-4" style="border-top: 1px solid rgba(255, 255, 255, 0.2);">
								<div class="bg-white/20 backdrop-blur-sm rounded-xl p-6 max-w-lg mx-auto">
									<div class="w-12 h-12 bg-gradient-to-r from-blue-400 to-indigo-400 rounded-full flex items-center justify-center mx-auto mb-3">
										<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
										</svg>
									</div>
									<h4 class="text-lg font-bold text-gray-800 mb-2">Plus d'actualit√©s disponibles</h4>
									<p class="text-gray-700 text-sm mb-4">Connectez-vous pour acc√©der √† toutes les actualit√©s r√©serv√©es aux familles.</p>
									<div class="flex flex-row gap-3 justify-center">
										<a href="/auth/login" class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-teal-500 to-cyan-500 text-white font-medium rounded-lg shadow hover:shadow-lg hover:scale-105 transition-all duration-300 text-sm">
											<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewbox="0 0 24 24">
												<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path>
											</svg>
											Se connecter
										</a>
										<a href="/inscription" class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-500 text-white font-medium rounded-lg shadow hover:shadow-lg hover:scale-105 transition-all duration-300 text-sm">
											<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewbox="0 0 24 24">
												<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path>
											</svg>
											Demande d'identifiants
										</a>
									</div>
								</div>
							</div>
						{% endif %}
					</div>
				</div>
			</div>
		{% else %}
			<!-- Message quand aucune actualit√© publique n'est disponible -->
			<div class="w-full flex flex-col min-h-[600px] gap-5">
				<div class="bg-gradient-to-br from-teal-50 to-cyan-100 p-0 flex-1 border-b-2 border-gray-300 rounded-lg overflow-hidden">
					<h3 class="text-3xl md:text-4xl font-bold bg-gradient-to-r from-teal-600 to-cyan-600 bg-clip-text text-transparent mb-5 text-center p-6">üì∞ Actualit√©s</h3>
					<div class="space-y-6 mb-8 px-8 pb-8">
						<div class="text-center py-12">
							<div class="bg-white/90 backdrop-blur-sm shadow-lg rounded-2xl p-8 max-w-lg mx-auto border border-white/50">
								<div class="w-16 h-16 bg-gradient-to-r from-teal-400 to-cyan-400 rounded-full flex items-center justify-center mx-auto mb-4">
									<svg class="w-8 h-8 text-white" fill="none" viewbox="0 0 24 24" stroke="currentColor">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"/>
									</svg>
								</div>
								<h4 class="text-xl font-bold text-gray-900 mb-2">Aucune actualit√© disponible</h4>
								<p class="text-gray-600 mb-6">
									{% if user %}
										Aucune actualit√© n'est publi√©e pour le moment.
									{% else %}
										Aucune actualit√© publique n'est disponible actuellement.
									{% endif %}
								</p>
								{% if not user %}
									<div class="flex flex-row gap-4 justify-center">
										<a href="/auth/login" class="headerbutton Btn">Se connecter</a>
										<a href="/inscription" class="headerbutton Btn">Demande d'identifiants</a>
									</div>
								{% endif %}
							</div>
						</div>
					</div>
				</div>
			</div>
		{% endif %}

		<div class="w-full px-4">
			<div class="flex flex-col lg:flex-row w-full h-auto min-h-[800px] gap-2">

				<div class="w-full lg:w-1/2 flex flex-col">
					<div class="bg-white p-8 h-full rounded-lg lg:rounded-l-lg lg:rounded-r-none">
						<h3 class="text-3xl md:text-4xl font-bold text-[#304a4d] mb-8 text-center">"Les Echos li√©s de St Mathieu"</h3>

						<!-- Carousel Custom secondaire -->
						<div class="relative w-full overflow-hidden rounded-lg" id="secondary-carousel">
							{% if carouselImages and carouselImages|length > 0 %}
								{% for image in carouselImages %}
									<div class="carousel-slide {% if loop.first %}active{% endif %}" data-slide-index="{{ loop.index - 1 }}">
										<img src="/uploads/carousel/{{ image.filename }}" class="w-full h-full object-cover rounded-lg" alt="{{ image.titre ?: 'Image carrousel' }}"/>
										{% if image.titre or image.description %}
											<div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent text-white p-8">
												{% if image.titre %}
													<h4 class="font-bold text-2xl md:text-3xl text-white drop-shadow-lg mb-2">{{ image.titre }}</h4>
												{% endif %}
												{% if image.description %}
													<p class="text-lg md:text-xl text-gray-200 drop-shadow-md">{{ image.description }}</p>
												{% endif %}
											</div>
										{% endif %}
									</div>
								{% endfor %}
							{% else %}
								<div class="carousel-slide active" data-slide-index="0">
									<img src="/assets/images/20250326_114849.jpg" class="w-full h-full object-cover rounded-lg" alt="Actualit√©s √©cole"/>
								</div>
								<div class="carousel-slide" data-slide-index="1">
									<img src="/assets/images/20250710_123601.jpg" class="w-full h-full object-cover rounded-lg" alt="Travaux √©cole"/>
								</div>
								<div class="carousel-slide" data-slide-index="2">
									<img src="/assets/images/entreePrincipale.jpg" class="w-full h-full object-cover rounded-lg" alt="Vie scolaire"/>
								</div>
								<div class="carousel-slide" data-slide-index="3">
									<img src="/assets/images/20250710_123943.jpg" class="w-full h-full object-cover rounded-lg" alt="Projets √©cole"/>
								</div>
							{% endif %}

							<!-- Navigation buttons -->
							<div class="absolute flex justify-between transform -translate-y-1/2 left-5 right-5 top-1/2 z-20">
								<button class="btn btn-circle bg-white/30 border-none hover:bg-white/50 carousel-prev">‚ùÆ</button>
								<button class="btn btn-circle bg-white/30 border-none hover:bg-white/50 carousel-next">‚ùØ</button>
							</div>
						</div>
					</div>
				</div>

				<!-- Section Travaux -->
				<div class="w-full lg:w-1/2 flex flex-col">
					<div class="bg-gray-50 p-8 h-full rounded-lg lg:rounded-r-lg lg:rounded-l-none">
						<h3 class="text-3xl md:text-4xl font-bold text-[#304a4d] mb-6 text-center">üî® Histoire et travaux de l'√©cole</h3>
						<div class="space-y-6">
							{% if travaux and travaux|length > 0 %}
								{% for travail in travaux %}
									<div class="border-l-4 border-{% if travail.important %}red-500{% else %}[#304a4d]{% endif %} pl-6">
										<div class="flex items-center gap-3 mb-3">
											<h4 class="text-xl md:text-2xl font-semibold text-[#304a4d]">{{ travail.titre }}</h4>
											{% if travail.important %}
												<span class="text-lg bg-red-100 text-red-600 px-3 py-2 rounded">Important</span>
											{% endif %}
										</div>
										<p class="text-lg md:text-xl text-gray-700 mb-4">{{ travail.description|length > 100 ? travail.description[:100] ~ '...' : travail.description }}</p>
										<div class="w-full bg-gray-200 rounded-full h-3 mb-3">
											<div class="bg-[#a7e3dd] h-3 rounded-full" style="width: {{ travail.progression }}%"></div>
										</div>
										<div class="flex items-center justify-between">
											<span class="text-lg md:text-xl text-gray-500">üîß
												{{ travail.progression }}%</span>
											<span class="text-lg md:text-xl text-gray-400">
												{% if travail.statut == 'EN_COURS' %}üöß En cours
												{% endif %}
												{% if travail.statut == 'TERMINE' %}‚úÖ Termin√©
												{% endif %}
												{% if travail.statut == 'PLANIFIE' %}üìã Planifi√©
												{% endif %}
												{% if travail.statut == 'SUSPENDU' %}‚è∏Ô∏è Suspendu
												{% endif %}
											</span>
										</div>
									</div>
								{% endfor %}
							{% else %}
								<div class="border-l-4 border-[#304a4d] pl-6">
									<h4 class="text-xl md:text-2xl font-semibold text-[#304a4d] mb-3">R√©novation cour</h4>
									<p class="text-lg md:text-xl text-gray-700 mb-4">Nouveaux jeux et rev√™tement pr√©vu pour septembre.</p>
									<div class="w-full bg-gray-200 rounded-full h-3 mb-3">
										<div class="bg-[#a7e3dd] h-3 rounded-full" style="width: 75%"></div>
									</div>
									<span class="text-lg md:text-xl text-gray-500">üîß 75%</span>
								</div>

								<div class="border-l-4 border-[#304a4d] pl-6">
									<h4 class="text-xl md:text-2xl font-semibold text-[#304a4d] mb-3">Tableaux num√©riques</h4>
									<p class="text-lg md:text-xl text-gray-700 mb-4">√âquipement de toutes les classes.</p>
									<div class="w-full bg-gray-200 rounded-full h-3 mb-3">
										<div class="bg-[#a7e3dd] h-3 rounded-full" style="width: 45%"></div>
									</div>
									<span class="text-lg md:text-xl text-gray-500">üîß 45%</span>
								</div>
							{% endif %}
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>


	<!-- Section Google Maps -->
	<div class="full-width-section mt-13">
		<h2 class="text-3xl md:text-4xl font-bold text-[#304a4d] mb-8 text-center py-8">üìç Nous trouver</h2>
		<div class="w-full">
			<div class="bg-white p-6">
				<div class="text-center mb-8">
					<h3 class="text-3xl md:text-4xl font-bold text-[#304a4d] mb-4">√âcole Saint-Mathieu</h3>
					<p class="text-xl md:text-2xl text-gray-600">
						<i class="fas fa-map-marker-alt text-[#a7e3dd] mr-2"></i>
						22 Place des H√©ros, 13013 Marseille - Ch√¢teau-Gombert
					</p>
					<p class="text-xl md:text-2xl text-gray-500 mt-3">
						<i class="fas fa-phone text-[#a7e3dd] mr-2"></i>
						T√©l√©phone : 04 91 07 07 18
					</p>

					<!-- Bouton pour basculer entre les cartes -->
					<div class="text-center mt-4">
						<button id="map-switch-btn" onclick="switchToOSM()" class="bg-[#a7e3dd] text-[#304a4d] px-4 py-2 rounded-lg hover:bg-[#8dd3cc] transition-colors text-sm font-medium">
							üåç OpenStreetMap
						</button>
					</div>
				</div>
				<!-- Carte Google Maps avec fallback -->
				<div
					class="w-full h-[600px] overflow-hidden shadow-md maps-container">
					<!-- Google Maps principal -->
					<iframe id="google-maps" src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d11611.506!2d5.427776!3d43.340679!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2z4oCOMjIgUGxhY2UgZGVzIEjDqXJvcywgMTMwMTMgTWFyc2VpbGxl!5e0!3m2!1sfr!2sfr!4v1693906800000!5m2!1sfr!2sfr" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade" title="√âcole Saint-Mathieu - 22 Place des H√©ros, Marseille" onerror="showMapFallback()"></iframe>
					<!-- Fallback OpenStreetMap (masqu√© par d√©faut) -->
					<iframe id="osm-maps" src="https://www.openstreetmap.org/export/embed.html?bbox=5.4247776%2C43.3356789%2C5.4347776%2C43.3456789&layer=mapnik&marker=43.340679%2C5.427776" width="100%" height="100%" style="border:0; display:none;" allowfullscreen="" loading="lazy" title="√âcole Saint-Mathieu - 22 Place des H√©ros, Marseille (OpenStreetMap)"></iframe>

					<!-- Message d'erreur de fallback -->
					<div id="map-error" style="display:none;" class="w-full h-full flex items-center justify-center bg-gray-100">
						<div class="text-center p-8">
							<i class="fas fa-map-marker-alt text-6xl text-[#a7e3dd] mb-4"></i>
							<h4 class="text-xl font-bold text-[#304a4d] mb-2">√âcole Saint-Mathieu</h4>
							<p class="text-lg text-gray-600">22 Place des H√©ros, 13013 Marseille</p>
							<p class="text-base text-gray-500 mt-2">Ch√¢teau-Gombert</p>
							<a href="https://maps.google.com/maps?q=22+Place+des+H√©ros,+13013+Marseille" target="_blank" class="inline-block mt-4 bg-[#a7e3dd] text-[#304a4d] px-4 py-2 rounded-lg hover:bg-[#8dd3cc] transition-colors">
								üó∫Ô∏è Ouvrir dans Google Maps
							</a>
						</div>
					</div>
				</div>
				<!-- Informations pratiques -->
				<div class="grid md:grid-cols-3 gap-6 mt-6 px-6">
					<div class="text-center p-6 bg-[#a7e3dd]/10 rounded-lg info-card">
						<i class="fas fa-car text-4xl text-[#304a4d] mb-4"></i>
						<h4 class="font-bold text-xl text-[#304a4d] mb-3">En voiture</h4>
						<p class="text-lg text-gray-600">Parkings disponibles:<br>
							- Place des H√©ros
							<br>
							- Parking Louis Feuill√©e</p>
					</div>
					<div class="text-center p-6 bg-[#a7e3dd]/10 rounded-lg info-card">
						<i class="fas fa-bus text-4xl text-[#304a4d] mb-4"></i>
						<h4 class="font-bold text-xl text-[#304a4d] mb-3">Transport en commun</h4>
						<p class="text-lg text-gray-600">Bus ligne 1 - Arr√™t place des H√©ros</p>
					</div>
					<div class="text-center p-6 bg-[#a7e3dd]/10 rounded-lg info-card">
						<i class="fas fa-clock text-4xl text-[#304a4d] mb-4"></i>
						<h4 class="font-bold text-xl text-[#304a4d] mb-3">Horaires</h4>
						<p class="text-lg text-gray-600">Lun-Ven : 07h30 - 18h00</p>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}


{% block scripts %}
	{{ parent() }}
	<script>
		// Fonction pour afficher/masquer le texte complet des actualit√©s
function toggleFullText(button) {
const hiddenContent = button.nextElementSibling;
const isExpanded = hiddenContent.style.display !== 'none';

if (isExpanded) {
hiddenContent.style.display = 'none';
button.textContent = 'Lire la suite';
button.className = 'bg-teal-500 hover:bg-teal-600 text-white font-medium ml-2 px-3 py-1 rounded-lg transition-colors duration-300 text-sm';
} else {
hiddenContent.style.display = 'inline';
button.textContent = 'R√©duire';
button.className = 'bg-orange-500 hover:bg-orange-600 text-white font-medium ml-2 px-3 py-1 rounded-lg transition-colors duration-300 text-sm';
}
}

// Gestion des carousels avec autoplay - chaque carousel est compl√®tement ind√©pendant
function createCarouselManager(carouselId, interval = 5000) {
return(function () {
const carousel = document.getElementById(carouselId);
if (! carousel) {
console.warn('Carousel introuvable:', carouselId);
return null;
}

const slides = carousel.querySelectorAll('.carousel-slide');
if (slides.length === 0) {
console.warn('Aucun slide trouv√© dans:', carouselId);
return null;
}

let currentIndex = 0;
let autoplayTimer = null;
let isRunning = false;

console.log(`Initialisation ${carouselId} avec ${
slides.length
} slides`);

// Afficher le premier slide au d√©marrage
slides[0].classList.add('active');

function showSlide(index) { // Navigation circulaire
if (index >= slides.length) {
index = 0;
} else if (index < 0) {
index = slides.length - 1;
}

// Fade out tous les slides
slides.forEach(slide => slide.classList.remove('active'));

// Fade in le slide actuel
slides[index].classList.add('active');
currentIndex = index;

console.log(`${carouselId}: affichage slide ${
index + 1
}/${
slides.length
}`);
}

function nextSlide() {
showSlide(currentIndex + 1);
}

function prevSlide() {
showSlide(currentIndex - 1);
}

function startAutoplay() {
if (isRunning) 
return;



stopAutoplay();
autoplayTimer = setInterval(function () {
nextSlide();
}, interval);
isRunning = true;
console.log(`${carouselId}: autoplay d√©marr√© (${interval}ms)`);
}

function stopAutoplay() {
if (autoplayTimer) {
clearInterval(autoplayTimer);
autoplayTimer = null;
}
isRunning = false;
}

// Configuration des boutons
const prevBtn = carousel.querySelector('.carousel-prev');
const nextBtn = carousel.querySelector('.carousel-next');

if (prevBtn) {
prevBtn.addEventListener('click', function (e) {
e.preventDefault();
e.stopPropagation();
stopAutoplay();
prevSlide();
setTimeout(function () {
startAutoplay();
}, 10000);
});
}

if (nextBtn) {
nextBtn.addEventListener('click', function (e) {
e.preventDefault();
e.stopPropagation();
stopAutoplay();
nextSlide();
setTimeout(function () {
startAutoplay();
}, 10000);
});
}

// Pause au survol
carousel.addEventListener('mouseenter', function () {
stopAutoplay();
});

carousel.addEventListener('mouseleave', function () {
startAutoplay();
});

// D√©marrer l'autoplay
startAutoplay();

return {next: nextSlide, prev: prevSlide, stop: stopAutoplay, start: startAutoplay};
})();
}

// Initialiser les carousels au chargement de la page
document.addEventListener('DOMContentLoaded', function () { // Attendre que tout soit charg√©
setTimeout(function () {
const heroCarousel = createCarouselManager('hero-carousel', 4000);
const secondaryCarousel = createCarouselManager('secondary-carousel', 6000);

console.log('‚úÖ Carousels initialis√©s');
}, 100);
});

// Gestion des cartes Google Maps avec fallback
function showMapFallback() {
console.log('‚ö†Ô∏è Erreur de chargement Google Maps, basculement vers OpenStreetMap');
document.getElementById('google-maps').style.display = 'none';
document.getElementById('osm-maps').style.display = 'block';
}

function switchToOSM() {
document.getElementById('google-maps').style.display = 'none';
document.getElementById('osm-maps').style.display = 'block';
document.getElementById('map-switch-btn').textContent = 'üó∫Ô∏è Google Maps';
document.getElementById('map-switch-btn').onclick = switchToGoogle;
}

function switchToGoogle() {
document.getElementById('osm-maps').style.display = 'none';
document.getElementById('google-maps').style.display = 'block';
document.getElementById('map-switch-btn').textContent = 'üåç OpenStreetMap';
document.getElementById('map-switch-btn').onclick = switchToOSM;
}

// V√©rification du chargement de Google Maps
document.addEventListener('DOMContentLoaded', function () {
const googleMaps = document.getElementById('google-maps');
if (googleMaps) {
googleMaps.addEventListener('error', showMapFallback);

// Test de chargement apr√®s 5 secondes
setTimeout(function () {
try {
if (googleMaps.contentDocument || googleMaps.contentWindow) {
console.log('‚úÖ Google Maps charg√© avec succ√®s');
} else {
console.log('‚ö†Ô∏è Google Maps inaccessible, test du fallback');
}
} catch (e) {
console.log('‚ö†Ô∏è Erreur d\'acc√®s Google Maps:', e);
}
}, 5000);
}
});
	</script>
{% endblock %}
