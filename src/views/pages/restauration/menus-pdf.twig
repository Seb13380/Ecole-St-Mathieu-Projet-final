{% extends "layouts/base.twig" %}

{% block title %}Menu de la semaine - École Saint-Mathieu
{% endblock %}

{% block head %}
	<style>
		/* FORCER LE PLEIN ÉCRAN - Éliminer toutes les contraintes */
		body {
			background: white !important;
			margin: 0 !important;
			padding: 0 !important;
		}

		main {
			min-height: 100vh !important;
			padding: 0 !important;
			margin: 0 !important;
		}

		/* Container PDF en mode plein écran */
		.menu-pdf-container {
			position: fixed;
			top: 0;
			left: 0;
			width: 100vw !important;
			height: 100vh !important;
			margin: 0;
			padding: 0;
			z-index: 1000;
			background: white;
		}

		.menu-pdf-embed {
			width: 100vw !important;
			height: calc(100vh - 60px) !important; /* Moins la barre du haut */
			border: none !important;
			margin: 0 !important;
			padding: 0 !important;
		}

		/* En-tête très compact */
		.menu-header-compact {
			height: 60px;
			background: rgba(249, 250, 251, 0.95);
			backdrop-filter: blur(10px);
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			z-index: 1001;
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 0 20px;
			box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
		}

		/* Supprimer tous les autres éléments du layout */
		.main-content {
			position: relative;
			width: 100vw;
			height: 100vh;
			overflow: hidden;
		}

		/* Bouton de fermeture pour revenir */
		.close-fullscreen {
			position: fixed;
			top: 10px;
			right: 20px;
			z-index: 1002;
			background: rgba(0, 0, 0, 0.7);
			color: white;
			border: none;
			border-radius: 50%;
			width: 40px;
			height: 40px;
			cursor: pointer;
			font-size: 20px;
		}
	</style>
{% endblock %}

{% block main %}
	<div class="main-content">
		{% if menu %}
			<!-- Affichage du PDF en mode PLEIN ÉCRAN -->
			<div
				class="menu-pdf-container">
				<!-- En-tête ultra-compact fixe -->
				<div class="menu-header-compact">
					<div class="flex items-center">
						<i class="fas fa-chef-hat text-orange-500 mr-2"></i>
						<span class="text-sm font-semibold text-gray-800">Menu de la semaine</span>
					</div>
					<div class="flex items-center space-x-2">
						<a href="{{ menu.pdfUrl }}" target="_blank" class="inline-flex items-center px-2 py-1 bg-orange-500 text-white text-xs font-medium rounded hover:bg-orange-600 transition duration-300">
							<i class="fas fa-download mr-1"></i>
							PDF
						</a>
						<button onclick="history.back()" class="close-fullscreen" title="Fermer">
							<i class="fas fa-times"></i>
						</button>
					</div>
				</div>

				<!-- PDF en plein écran -->
				<div style="margin-top: 60px; height: calc(100vh - 60px);">
					<embed src="{{ menu.pdfUrl }}" type="application/pdf" class="menu-pdf-embed">
				</div>
			</div>

		{% else %}
			<!-- Aucun menu actif -->
			<div class="flex items-center justify-center h-screen">
				<div class="text-center">
					<i class="fas fa-chef-hat text-gray-300 text-6xl mb-4"></i>
					<h2 class="text-2xl font-bold text-gray-800 mb-4">Aucun menu disponible</h2>
					<p class="text-gray-600">
						Le menu de la semaine sera bientôt disponible.
					</p>
				</div>
			</div>
		{% endif %}
	</div>
{% endblock %}
