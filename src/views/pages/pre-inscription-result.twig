{% extends "layouts/base.twig" %}

{% block title %}
	{{ title }}
	- √âcole St Mathieu
{% endblock %}

{% block styles %}
	<style>
		.result-container {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			min-height: 100vh;
			padding: 2rem 0;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.result-card {
			background: white;
			border-radius: 20px;
			box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
			overflow: hidden;
			max-width: 600px;
			width: 100%;
			margin: 0 1rem;
		}

		.result-header {
			padding: 2rem;
			text-align: center;
		}

		.result-header.approved {
			background: linear-gradient(135deg, #10b981 0%, #059669 100%);
			color: white;
		}

		.result-header.rejected {
			background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
			color: white;
		}

		.result-header.pending {
			background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
			color: white;
		}

		.result-content {
			padding: 2rem;
		}

		.info-grid {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 1rem;
			margin: 1.5rem 0;
		}

		.info-item {
			background: #f8fafc;
			padding: 1rem;
			border-radius: 8px;
			border-left: 3px solid #e5e7eb;
		}

		.info-label {
			font-size: 0.75rem;
			font-weight: 600;
			color: #6b7280;
			text-transform: uppercase;
			letter-spacing: 0.05em;
			margin-bottom: 0.25rem;
		}

		.info-value {
			font-size: 0.875rem;
			color: #374151;
			font-weight: 500;
		}

		.success-icon {
			width: 4rem;
			height: 4rem;
			margin: 0 auto 1rem;
			color: #10b981;
		}

		.error-icon {
			width: 4rem;
			height: 4rem;
			margin: 0 auto 1rem;
			color: #ef4444;
		}

		.warning-icon {
			width: 4rem;
			height: 4rem;
			margin: 0 auto 1rem;
			color: #f59e0b;
		}

		.action-buttons {
			display: flex;
			gap: 1rem;
			justify-content: center;
			margin-top: 2rem;
			flex-wrap: wrap;
		}

		.btn {
			padding: 0.75rem 1.5rem;
			border-radius: 8px;
			font-weight: 600;
			font-size: 0.875rem;
			text-decoration: none;
			transition: all 0.3s ease;
			display: inline-flex;
			align-items: center;
			gap: 0.5rem;
		}

		.btn-primary {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			color: white;
		}

		.btn-primary:hover {
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
		}

		.btn-secondary {
			background: #f3f4f6;
			color: #374151;
			border: 1px solid #d1d5db;
		}

		.btn-secondary:hover {
			background: #e5e7eb;
		}

		@media(max-width: 768px) {
			.info-grid {
				grid-template-columns: 1fr;
			}

			.action-buttons {
				flex-direction: column;
			}
		}
	</style>
{% endblock %}

{% block content %}
	<div class="result-container">
		<div class="result-card">
			<div class="result-header {{ status|lower }}">
				{% if status == 'APPROVED' %}
					<svg class="success-icon" fill="currentColor" viewbox="0 0 20 20">
						<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
					</svg>
					<h1 class="text-2xl font-bold">‚úÖ Pr√©-inscription approuv√©e</h1>
					<p class="mt-2 opacity-90">Le compte parent a √©t√© cr√©√© avec succ√®s</p>
				{% elseif status == 'REJECTED' %}
					<svg class="error-icon" fill="currentColor" viewbox="0 0 20 20">
						<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
					</svg>
					<h1 class="text-2xl font-bold">‚ùå Pr√©-inscription rejet√©e</h1>
					<p class="mt-2 opacity-90">La demande n'a pas pu √™tre accept√©e</p>
				{% else %}
					<svg class="warning-icon" fill="currentColor" viewbox="0 0 20 20">
						<path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
					</svg>
					<h1 class="text-2xl font-bold">‚ö†Ô∏è D√©j√† trait√©e</h1>
					<p class="mt-2 opacity-90">Cette demande a d√©j√† √©t√© trait√©e</p>
				{% endif %}
			</div>

			<div class="result-content">
				<div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
					<p class="text-blue-800 text-center">{{ message }}</p>
				</div>

				<!-- Informations de la pr√©-inscription -->
				<h3 class="text-lg font-semibold text-gray-800 mb-4">üìã D√©tails de la demande #{{ preInscription.id }}</h3>

				<div class="info-grid">
					<div class="info-item">
						<div class="info-label">Enfant</div>
						<div class="info-value">{{ preInscription.childFirstName }}
							{{ preInscription.childLastName }}</div>
					</div>

					<div class="info-item">
						<div class="info-label">Parent</div>
						<div class="info-value">{{ preInscription.parentFirstName }}
							{{ preInscription.parentLastName }}</div>
					</div>

					<div class="info-item">
						<div class="info-label">Email</div>
						<div class="info-value">{{ preInscription.parentEmail }}</div>
					</div>

					<div class="info-item">
						<div class="info-label">T√©l√©phone</div>
						<div class="info-value">{{ preInscription.parentPhone }}</div>
					</div>

					<div class="info-item">
						<div class="info-label">Date de demande</div>
						<div class="info-value">{{ preInscription.createdAt|date('d/m/Y H:i') }}</div>
					</div>

					<div class="info-item">
						<div class="info-label">Statut</div>
						<div class="info-value">
							{% if status == 'APPROVED' %}
								<span class="text-green-600 font-semibold">‚úÖ Approuv√©e</span>
							{% elseif status == 'REJECTED' %}
								<span class="text-red-600 font-semibold">‚ùå Rejet√©e</span>
							{% else %}
								<span class="text-yellow-600 font-semibold">‚è≥
									{{ status }}</span>
							{% endif %}
						</div>
					</div>
				</div>

				{% if status == 'APPROVED' and newUser %}
					<div class="bg-green-50 border border-green-200 rounded-lg p-4 mt-6">
						<h4 class="font-semibold text-green-800 mb-2">üéâ Compte parent cr√©√©</h4>
						<p class="text-green-700 text-sm">
							Le parent peut maintenant se connecter avec :
							<br><strong>Email :</strong>
							{{ newUser.email }}
							<br><strong>Mot de passe :</strong>
							Celui choisi lors de la pr√©-inscription
						</p>
					</div>
				{% endif %}

				<div class="action-buttons">
					<a href="/admin/pre-inscriptions" class="btn btn-primary">
						<svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
						</svg>
						Voir toutes les pr√©-inscriptions
					</a>

					<a href="/auth/login" class="btn btn-secondary">
						<svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path>
						</svg>
						Se connecter √† l'administration
					</a>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
