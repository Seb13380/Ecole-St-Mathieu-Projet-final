{% extends "layouts/base.twig" %}

{% block title %}{{ pageTitle }} - École Saint-Mathieu{% endblock %}

{% block main %}
<div class="container mx-auto p-4 font-poppins">
	<!-- Header Section -->
	<h1 class="text-3xl font-bold mb-6 text-[#304a4d]">
		{% if category == 'ecole' %}
			📄 Documents Officiels de l'École
		{% else %}
			✝️ Documents Pastorale
		{% endif %}
	</h1>

	<!-- Info Alert -->
	<div class="alert alert-info permanent mb-6">
		<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6">
			<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
		</svg>
		<div>
			<h3 class="font-bold">
				{% if category == 'ecole' %}
					Documents pédagogiques et administratifs
				{% else %}
					Documents spirituels et pastoraux
				{% endif %}
			</h3>
			<div class="text-sm">
				{% if category == 'ecole' %}
					Retrouvez tous les documents officiels, projets éducatifs et chartes de l'école
				{% else %}
					Découvrez les documents relatifs à la pastorale et à la spiritualité de l'école
				{% endif %}
			</div>
		</div>
	</div>

	<!-- Documents Grid -->
	{% if documentsByType and documentsByType|length > 0 %}
		<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
			{% for type, documents in documentsByType %}
				{% set document = documents[0] %} {# Prendre le premier document de chaque type #}
				<div class="card bg-base-100 shadow-lg hover:shadow-xl transition-shadow duration-300">
					<div class="card-body">
						<div class="flex items-start justify-between mb-3">
							<h3 class="card-title text-[#304a4d] text-lg">
								{% if type == 'PROJET_EDUCATIF' %}📋 Projet éducatif
								{% elseif type == 'PROJET_ETABLISSEMENT' %}🏫 Projet d'établissement  
								{% elseif type == 'REGLEMENT_INTERIEUR' %}📜 Règlement intérieur
								{% elseif type == 'ORGANIGRAMME' %}🏗️ Organigramme
								{% elseif type == 'AGENDA' %}📅 Agenda
								{% elseif type == 'CHARTE_LAICITE' %}⚖️ Charte de la laïcité
								{% elseif type == 'CHARTE_NUMERIQUE' %}💻 Charte du numérique
								{% elseif type == 'CHARTE_VIE_SCOLAIRE' %}🎓 Charte de vie scolaire
								{% elseif type == 'CHARTE_RESTAURATION' %}🍽️ Charte de restauration
								{% elseif type == 'PASTORALE_AXE' %}✝️ Axe Pastoral
								{% elseif type == 'PASTORALE_TEMPS_PRIANT' %}🙏 Temps Priant
								{% elseif type == 'PASTORALE_ENSEMBLE' %}⛪ Ensemble pastoral
								{% else %}📄 {{ type|replace('_', ' ')|title }}
								{% endif %}
							</h3>
							
							{% if document.active %}
								<div class="badge badge-success badge-sm">✅ Disponible</div>
							{% else %}
								<div class="badge badge-warning badge-sm">⏳ En préparation</div>
							{% endif %}
						</div>

						{% if document.description %}
							<p class="text-slate-600 text-sm mb-4 leading-relaxed">
								{{ document.description }}
							</p>
						{% endif %}

						<div class="text-xs text-slate-500 mb-4">
							<div class="flex items-center">
								<svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewbox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
								</svg>
								Mis à jour le {{ document.updatedAt|date('d/m/Y') }}
							</div>
						</div>

						<div class="card-actions justify-end mt-auto">
							{% if document.contenu %}
								<a href="/documents/show/{{ document.id }}" 
								   class="btn btn-primary btn-sm">
									<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewbox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
									</svg>
									Consulter
								</a>
							{% endif %}

							{% if document.pdfUrl %}
								<a href="{{ document.pdfUrl }}" 
								   target="_blank"
								   class="btn btn-secondary btn-sm">
									<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewbox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
									</svg>
									PDF
								</a>
							{% endif %}
						</div>
					</div>
				</div>
			{% endfor %}
		</div>
	{% else %}
		<div class="alert alert-warning permanent">
			<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"></path>
			</svg>
			<div>
				<h3 class="font-bold">Aucun document disponible</h3>
				<div class="text-sm">
					{% if category == 'ecole' %}
						Les documents de l'école seront bientôt disponibles.
					{% else %}
						Les documents de la pastorale seront bientôt disponibles.
					{% endif %}
				</div>
			</div>
		</div>
	{% endif %}

	<!-- Navigation -->
	<div class="mt-8 text-center">
		<a href="/" class="btn btn-outline">
			<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewbox="0 0 24 24">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
			</svg>
			Retour à l'accueil
		</a>
	</div>
</div>
{% endblock %}
